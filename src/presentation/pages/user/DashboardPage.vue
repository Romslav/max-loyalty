<template>
  <div class="dashboard">
    <!-- –ì–æ–ª–æ–≤–Ω—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <section class="dashboard-header">
      <h1 class="dashboard-title">–ö–∞–±–∏–Ω–µ—Ç</h1>
      <div class="dashboard-greeting">{{ greeting }}</div>
    </section>

    <!-- –ö–∞—Ä—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">‚≠ê</div>
        <div class="stat-value">{{ userStats.points }}</div>
        <div class="stat-label">–í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üèÜ</div>
        <div class="stat-value">{{ userStats.level }}</div>
        <div class="stat-label">–í–∞—à —É—Ä–æ–≤–µ–Ω—å</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üéÅ</div>
        <div class="stat-value">{{ userStats.rewards }}</div>
        <div class="stat-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–≥—Ä–∞–¥</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-value">${{ userStats.cashback }}</div>
        <div class="stat-label">–ù–∞—Ä–æ–±–æ—Ç–∞–Ω–æ –∫—ç—à–±—ç–∫–∞</div>
      </div>
    </div>

    <!-- –®–∫–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
    <div class="progress-section">
      <h2 class="section-title">–ü–æ–¥—ä–µ–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å</h2>
      <div class="progress-bar">
        <div class="progress-fill" :style="{ width: progressPercent + '%' }"></div>
      </div>
      <p class="progress-text">{{ progressText }}</p>
    </div>

    <!-- –ù–µ–¥–∞–≤–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
    <div class="transactions-section">
      <div class="section-header">
        <h2 class="section-title">–ù–µ–¥–∞–≤–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h2>
        <router-link to="/transactions" class="link">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</router-link>
      </div>
      <div class="transactions-list">
        <div v-for="tx in transactions" :key="tx.id" class="transaction-item">
          <div class="transaction-info">
            <div class="transaction-icon">{{ tx.icon }}</div>
            <div class="transaction-details">
              <div class="transaction-name">{{ tx.name }}</div>
              <div class="transaction-date">{{ tx.date }}</div>
            </div>
          </div>
          <div class="transaction-amount">{{ tx.amount }} –±–∞–ª–ª–æ–≤</div>
        </div>
      </div>
    </div>

    <!-- –ù–∞–≥—Ä–∞–¥—ã –¥–ª—è –æ–±–º–µ–Ω–∞ -->
    <div class="rewards-section">
      <div class="section-header">
        <h2 class="section-title">–î–æ—Å—Ç–∞–≤–∫–∏</h2>
        <router-link to="/rewards" class="link">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</router-link>
      </div>
      <div class="rewards-grid">
        <div v-for="reward in availableRewards" :key="reward.id" class="reward-card">
          <div class="reward-image">{{ reward.image }}</div>
          <h3 class="reward-name">{{ reward.name }}</h3>
          <p class="reward-points">{{ reward.points }} –±–∞–ª–ª–æ–≤</p>
          <button type="button" class="btn btn--primary btn--sm btn--full-width">
            –û–±–º–µ–Ω—è—Ç—å
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed, ref } from 'vue';

const userStats = ref({
  points: 1250,
  level: 'Silver',
  rewards: 3,
  cashback: 85.50,
});

const transactions = [
  { id: 1, icon: 'üõçÔ∏è', name: '–û–Ω–ª–∞–π–Ω –ø–æ–∫—É–ø–∫–∞', date: '–í—á–µ—Ä–∞', amount: 250 },
  { id: 2, icon: 'üèïÔ∏è', name: '–ü–æ–∫—É–ø–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ', date: '2 –¥–Ω—è –Ω–∞–∑–∞–¥', amount: 150 },
  { id: 3, icon: 'üí≥', name: '–í—ã–ø–ª–∞—Ç–∞ —Ä–µ–¥–µ–Ω–∏—è', date: '3 –¥–Ω—è –Ω–∞–∑–∞–¥', amount: -100 },
];

const availableRewards = [
  { id: 1, image: 'üéß', name: '–ù–∞—É—à–Ω–∏–∫–∏', points: 500 },
  { id: 2, image: 'üèÉ', name: '–ö—Ä–æ—Å—Å–æ–≤–∫–∏', points: 750 },
  { id: 3, image: 'üìö', name: '–ù–∏–≥–∞', points: 300 },
];

const currentPoints = 1250;
const nextLevelPoints = 2000;
const progressPoints = currentPoints;
const progressMax = nextLevelPoints;
const progressPercent = computed(() => (progressPoints / progressMax) * 100);

const progressText = computed(() => {
  const remaining = progressMax - progressPoints;
  return `–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –µ—â—ë ${remaining} –±–∞–ª–ª–æ–≤`;
});

const greeting = computed(() => {
  const hour = new Date().getHours();
  if (hour < 12) return '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! üåü';
  if (hour < 18) return '–ù–∞ –≤—Ä–µ–º–µ–Ω–∏! üéã';
  return '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! üëã';
});
</script>

<style scoped>
.dashboard {
  padding: var(--space-24);
  max-width: 1200px;
  margin: 0 auto;
}

.dashboard-header {
  margin-bottom: var(--space-32);
}

.dashboard-title {
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  margin: 0 0 var(--space-8) 0;
}

.dashboard-greeting {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
}

/* –ö–∞—Ä—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-16);
  margin-bottom: var(--space-32);
}

.stat-card {
  padding: var(--space-20);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  text-align: center;
  transition: all var(--duration-normal) var(--ease-standard);
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
}

.stat-icon {
  font-size: var(--font-size-3xl);
  margin-bottom: var(--space-12);
}

.stat-value {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  margin-bottom: var(--space-8);
}

.stat-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* –ü—Ä–æ–≥—Ä–µ—Å—Å -->
.progress-section {
  padding: var(--space-24);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-32);
}

.section-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
  margin: 0 0 var(--space-16) 0;
}

.progress-bar {
  height: 8px;
  background: var(--color-secondary);
  border-radius: var(--radius-full);
  overflow: hidden;
  margin-bottom: var(--space-12);
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-teal-600) 100%);
  transition: width var(--duration-normal) var(--ease-standard);
}

.progress-text {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin: 0;
}

/* –ù–µ–¥–∞–≤–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
.transactions-section {
  margin-bottom: var(--space-32);
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-16);
}

.link {
  color: var(--color-primary);
  text-decoration: none;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  transition: color var(--duration-normal) var(--ease-standard);
}

.link:hover {
  color: var(--color-primary-hover);
}

.transactions-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
}

.transaction-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-16);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
}

.transaction-info {
  display: flex;
  align-items: center;
  gap: var(--space-12);
}

.transaction-icon {
  font-size: var(--font-size-2xl);
}

.transaction-details {
  display: flex;
  flex-direction: column;
}

.transaction-name {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-text);
}

.transaction-date {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.transaction-amount {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
}

/* –ù–∞–≥—Ä–∞–¥—ã -->
.rewards-section {
  margin-bottom: var(--space-32);
}

.rewards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: var(--space-16);
}

.reward-card {
  padding: var(--space-16);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
  transition: all var(--duration-normal) var(--ease-standard);
}

.reward-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
}

.reward-image {
  font-size: var(--font-size-3xl);
}

.reward-name {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  margin: 0;
}

.reward-points {
  font-size: var(--font-size-sm);
  color: var(--color-primary);
  font-weight: var(--font-weight-bold);
  margin: 0;
}

@media (max-width: 640px) {
  .dashboard {
    padding: var(--space-16);
  }

  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .rewards-grid {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  }
}
</style>
